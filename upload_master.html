<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>地点マスター一括登録</title>
  <style>
    body { font-family: sans-serif; padding: 40px; text-align: center; background-color: #f0f0f0; }
    button { 
      padding: 20px 40px; 
      font-size: 24px; 
      cursor: pointer; 
      background: #003366; 
      color: white; 
      border: none; 
      border-radius: 8px; 
      box-shadow: 0 4px #999;
    }
    button:active {
      background-color: #002244;
      box-shadow: 0 2px #666;
      transform: translateY(2px);
    }
    #status { margin-top: 30px; font-weight: bold; font-size: 20px; color: #333; white-space: pre-wrap; }
  </style>
</head>
<body>

  <h2>橘湾岸ＱＲ2025春・秋<br>地点マスター登録ツール</h2>
  <p>以下のボタンを押すと、頂いたJSONデータ（全36件）を一括登録します。</p>
  
  <button onclick="registerMasterData()">マスターデータを登録する</button>
  
  <div id="status">待機中...</div>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <script>
    // ▼▼▼ 頂いたJSONデータをここに埋め込みました ▼▼▼
    const MASTER_DATA = [
    {
      "id": 1,
      "name": "【受付】"
    },
    {
      "id": 2,
      "name": "【スタート】"
    },
    {
      "id": 3,
      "name": "日並"
    },
    {
      "id": 4,
      "name": "鳴見ダム"
    },
    {
      "id": 5,
      "name": "あぐりの丘"
    },
    {
      "id": 6,
      "name": "女神大橋"
    },
    {
      "id": 7,
      "name": "伊王島大橋(往路)"
    },
    {
      "id": 8,
      "name": "伊王島灯台"
    },
    {
      "id": 9,
      "name": "伊王島大橋(復路)"
    },
    {
      "id": 10,
      "name": "大籠"
    },
    {
      "id": 11,
      "name": "恐竜体育館"
    },
    {
      "id": 12,
      "name": "権現山"
    },
    {
      "id": 13,
      "name": "樺島公民館(往路)"
    },
    {
      "id": 14,
      "name": "樺島灯台"
    },
    {
      "id": 15,
      "name": "樺島公民館(復路)"
    },
    {
      "id": 16,
      "name": "自転車道入口"
    },
    {
      "id": 17,
      "name": "川原憩の家"
    },
    {
      "id": 18,
      "name": "茂木ぶらぶら"
    },
    {
      "id": 19,
      "name": "日見公園"
    },
    {
      "id": 20,
      "name": "飯盛峠とんの山"
    },
    {
      "id": 21,
      "name": "飯盛経塚"
    },
    {
      "id": 22,
      "name": "千々石"
    },
    {
      "id": 23,
      "name": "【HW小浜到着】"
    },
    {
      "id": 24,
      "name": "【HW小浜リスタート】"
    },
    {
      "id": 25,
      "name": "津波見"
    },
    {
      "id": 26,
      "name": "口之津"
    },
    {
      "id": 27,
      "name": "原城駐車場"
    },
    {
      "id": 28,
      "name": "堂崎"
    },
    {
      "id": 29,
      "name": "ふかえ本陣"
    },
    {
      "id": 30,
      "name": "島原城"
    },
    {
      "id": 31,
      "name": "平成新山"
    },
    {
      "id": 32,
      "name": "深江運動場"
    },
    {
      "id": 33,
      "name": "俵石展望所"
    },
    {
      "id": 34,
      "name": "雲仙温泉"
    },
    {
      "id": 35,
      "name": "小浜木場"
    },
    {
      "id": 36,
      "name": "【ゴール】"
    },
    {
      "id": 99,
      "name": "【リタイヤ】"
    }
  ];

    // Firebase設定
    const firebaseConfig = {
      apiKey: "AIzaSyD_Aic5iQ7OYGO9qTv0patspCKbwsuYcs8",
      authDomain: "tachibana-wangan.firebaseapp.com",
      projectId: "tachibana-wangan",
      storageBucket: "tachibana-wangan.firebasestorage.app",
      messagingSenderId: "963128842192",
      appId: "1:963128842192:web:5ee0eb05d3df5e7c63cbd5"
    };

    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const firestore = firebase.firestore();

    async function registerMasterData() {
      const status = document.getElementById('status');
      
      if(!confirm("全" + MASTER_DATA.length + "件の地点データを登録しますか？\n（既存データは上書きされます）")) {
        return;
      }

      status.textContent = "登録処理中...";
      status.style.color = "blue";

      try {
        const batch = firestore.batch();

        MASTER_DATA.forEach(item => {
          // ドキュメントIDを数値のIDと同じにする（検索しやすくするため）
          const docRef = firestore.collection("locations_master").doc(String(item.id));
          batch.set(docRef, item);
        });

        await batch.commit();

        status.innerHTML = "✅ 登録完了しました！<br>アプリ画面で地点が選べるか確認してください。";
        status.style.color = "green";
        
      } catch (e) {
        console.error(e);
        status.textContent = "エラーが発生しました: " + e.message;
        status.style.color = "red";
      }
    }
  </script>
</body>
</html>
